% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/define_factors.R
\name{define_factors}
\alias{define_factors}
\title{Define Which Factors for Multiverse Analysis}
\usage{
define_factors(data, ...)
}
\arguments{
\item{data}{Data frame containing meta-analysis data with which factor columns}

\item{...}{Factor definitions using either simple or custom syntax (see Details)}
}
\value{
Object of class \code{multiverse_factor_setup} containing:
\describe{
  \item{data}{Original data with added wf_* columns}
  \item{factors}{Data frame describing each factor:
    \itemize{
      \item \code{label}: User-provided factor name
      \item \code{column}: Original data column
      \item \code{decision}: Decision type (E/U/N)
      \item \code{wf_internal}: Internal wf_* column name
      \item \code{grouping_type}: "simple" or "custom"
    }
  }
  \item{decision_map}{Named vector mapping wf_* columns to decision types}
  \item{factor_groups}{List of custom group definitions (if any)}
}
}
\description{
Defines study selection criteria ("which factors") with automatic detection
of simple vs. custom factor specifications. Creates the foundation for
multiverse analysis by mapping data columns to analytical choices.
}
\details{
\strong{Simple factors} (string):
\itemize{
  \item \code{"column_name"} - Uses each unique level + "all combined"
  \item \code{"column_name|E"} - Adds decision type (E/U/N)
}

\strong{Custom factors} (list):
\preformatted{list(
  "column_name",
  decision = "U",  # Optional, default: "U"
  groups = list(
    group_name = c("level1", "level2"),
    ...
  )
)}

\strong{Decision types:}
\itemize{
  \item \code{E} (Equivalent): All options theoretically equivalent
  \item \code{U} (Uncertain): Unclear which option is best (default)
  \item \code{N} (Non-equivalent): Options represent different research questions
}

Type N factors create separate multiverses; types E and U vary within multiverses.
}
\examples{
\dontrun{
# Simple factors
setup <- define_factors(
  data,
  Population = "population_type",      # Default: U
  Measure = "outcome_measure|E"        # Explicit: E
)

# Mixed simple and custom
setup <- define_factors(
  data,
  Population = "population_type|E",
  Risk_of_Bias = list(
    "rob_rating",
    decision = "U",
    groups = list(
      low_only = "low",
      low_moderate = c("low", "moderate"),
      all_studies = c("low", "moderate", "high")
    )
  ),
  Study_Design = "design_type|N"  # Creates separate multiverses
)
}

}
\seealso{
\code{\link{create_multiverse_specifications}} for next pipeline step
\code{\link{check_data_multiverse}} for data validation
}
